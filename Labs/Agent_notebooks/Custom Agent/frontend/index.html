<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Idea to PRD Generator</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Include marked.js for markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Include highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Business Idea to PRD Generator</h1>
            <p class="subtitle">Transform your business ideas into comprehensive Product Requirements Documents using AI agents</p>
        </header>

        <main>
            <!-- Input Form -->
            <section class="form-section">
                <h2>Enter Your Business Idea</h2>
                <form id="prd-form">
                    <div class="input-group">
                        <label for="business-idea">Business Idea *</label>
                        <textarea 
                            id="business-idea" 
                            name="business_idea" 
                            placeholder="Describe your business idea in detail. What problem does it solve? What makes it unique?"
                            required
                            rows="4"
                        ></textarea>
                    </div>

                    <div class="input-group">
                        <label for="product-name">Product Name</label>
                        <input 
                            type="text" 
                            id="product-name" 
                            name="product_name" 
                            placeholder="Enter a name for your product (optional)"
                        >
                    </div>

                    <div class="input-group">
                        <label for="target-market">Target Market</label>
                        <input 
                            type="text" 
                            id="target-market" 
                            name="target_market" 
                            placeholder="e.g., Language learners aged 18-35, Small business owners"
                        >
                    </div>

                    <div class="input-group">
                        <label for="budget-range">Budget Range</label>
                        <select id="budget-range" name="budget_range">
                            <option value="">Select budget range (optional)</option>
                            <option value="Under $10,000">Under $10,000</option>
                            <option value="$10,000 - $50,000">$10,000 - $50,000</option>
                            <option value="$50,000 - $100,000">$50,000 - $100,000</option>
                            <option value="$100,000 - $500,000">$100,000 - $500,000</option>
                            <option value="$500,000+">$500,000+</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="timeline">Timeline</label>
                        <select id="timeline" name="timeline">
                            <option value="">Select timeline (optional)</option>
                            <option value="3 months">3 months</option>
                            <option value="6 months">6 months</option>
                            <option value="12 months">12 months</option>
                            <option value="18 months">18 months</option>
                            <option value="24+ months">24+ months</option>
                        </select>
                    </div>

                    <button type="submit" id="generate-btn" class="generate-btn">
                        <span class="btn-text">Generate PRD</span>
                        <div class="loading-spinner" style="display: none;"></div>
                    </button>
                </form>
            </section>

            <!-- Progress Section -->
            <section id="progress-section" class="progress-section" style="display: none;">
                <h3>Agent Collaboration in Progress</h3>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div class="progress-text" id="progress-text">Initializing agents...</div>
                </div>
                <div class="agent-steps">
                    <div class="step" id="step-1">
                        <div class="step-icon">üîç</div>
                        <div class="step-content">
                            <h4>Market Research</h4>
                            <p>Business Analyst conducting market analysis...</p>
                        </div>
                    </div>
                    <div class="step" id="step-2">
                        <div class="step-icon">üíº</div>
                        <div class="step-content">
                            <h4>Business Model</h4>
                            <p>Strategy Consultant developing business model...</p>
                        </div>
                    </div>
                    <div class="step" id="step-3">
                        <div class="step-icon">üìã</div>
                        <div class="step-content">
                            <h4>PRD Creation</h4>
                            <p>Product Manager creating PRD document...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Results Section -->
            <section id="results-section" class="results-section" style="display: none;">
                <div class="results-header">
                    <h2>Generated PRD Document</h2>
                    <div class="results-actions">
                        <button id="copy-btn" class="action-btn">Copy</button>
                        <button id="download-btn" class="action-btn">Download</button>
                        <button id="new-btn" class="action-btn secondary">New PRD</button>
                    </div>
                </div>
                
                <!-- Validation Results -->
                <div id="validation-results" class="validation-results">
                    <!-- Populated by JavaScript -->
                </div>

                <!-- PRD Content -->
                <div id="prd-content" class="prd-content">
                    <!-- Markdown content will be rendered here -->
                </div>
            </section>

            <!-- Error Section -->
            <section id="error-section" class="error-section" style="display: none;">
                <h3>‚ùå Error</h3>
                <div id="error-message" class="error-message"></div>
                <button id="retry-btn" class="retry-btn">Try Again</button>
            </section>
        </main>

        <footer>
            <!-- Status Indicator -->
            <div id="status-indicator" class="status-indicator">
                <div class="status-dot" id="status-dot"></div>
                <span id="status-text">Checking API connection...</span>
            </div>
            <p>Powered by CrewAI and FastAPI | <a href="http://localhost:8000/docs" target="_blank">API Documentation</a></p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>